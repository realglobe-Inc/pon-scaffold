language: node_js
services:
  - redis-server
addons:
  apt:
    packages:
      - redis-server
node_js:
- '7'
before_install:
 - npm i npm-cli-login -g
 - npm-cli-login -u "${NPM_USER}" -p "${NPM_PASSWORD}" -e "${NPM_EMAIL}"
 - npm who
install:
- npm install jsdoc -g
- npm install pon-cli -g
- npm install
script:
- npm run build
- npm run test
after_success:
- ./ci/travis/publish.js
